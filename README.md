# Commit Assistant

[![codecov](https://codecov.io/gh/OrarioGit/Commit-Assistant/graph/badge.svg?token=18M86ZC93G)](https://codecov.io/gh/OrarioGit/Commit-Assistant)
![versions](docs/images/python_version_badges.svg)

Commit Assistant æ˜¯ä¸€å€‹åŸºæ–¼ AI çš„ Git commit è¨Šæ¯ç”Ÿæˆå·¥å…·ï¼Œå®ƒèƒ½å¤ ï¼š

- è‡ªå‹•åˆ†æä½ çš„ç¨‹å¼ç¢¼è®Šæ›´
- ä½¿ç”¨ Google Gemini AI ç”Ÿæˆæ¸…æ™°ã€è¦ç¯„çš„ commit è¨Šæ¯
- ä½œç‚º Git hook è‡ªå‹•é‹è¡Œï¼Œæå‡é–‹ç™¼æ•ˆç‡

## ç›®éŒ„

1. [ç‰¹é»](#ç‰¹é»)
2. [å®‰è£èˆ‡è¨­å®š](#å®‰è£)
   - [å®‰è£å¥—ä»¶](#1-å®‰è£å¥—ä»¶)
   - [æ›´æ–°å¥—ä»¶](#2-æ›´æ–°å¥—ä»¶)
   - [è¨­å®š API é‡‘é‘°](#3-è¨­å®š-Google-Gemini-API-é‡‘é‘°)
   - [è¨­å®š Git Hook](#4-è¨­å®š-Git-Hook)
3. [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
   - [æŒ‡ä»¤èªªæ˜](#æŒ‡ä»¤èªªæ˜)
   - [è‡ªå‹•æ¨¡å¼](#è‡ªå‹•æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰)
   - [æ‰‹å‹•æ¨¡å¼](#æ‰‹å‹•æ¨¡å¼)
   - [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
4. [æ›´æ–°ç®¡ç†](#æ›´æ–°ç®¡ç†)
   - [æ›´æ–°å–®ä¸€å°ˆæ¡ˆ](#æ›´æ–°å–®ä¸€å°ˆæ¡ˆ)
   - [æ‰¹é‡æ›´æ–°](#æ‰¹é‡æ›´æ–°æ‰€æœ‰å°ˆæ¡ˆ)
5. [Commit é¢¨æ ¼ç®¡ç†](#Commit-é¢¨æ ¼ç®¡ç†)
   - [é¢¨æ ¼å±¤ç´š](#é¢¨æ ¼çš„å±¤ç´š)
   - [ç³»çµ±å…§å»ºé¢¨æ ¼](#ç³»çµ±å…§å»ºçš„é¢¨æ ¼ç¯„ä¾‹)
   - [é¢¨æ ¼æ“ä½œæŒ‡ä»¤](#åˆ—å‡ºç•¶å‰å°ˆæ¡ˆå¯ä½¿ç”¨çš„é¢¨æ ¼)
   - [ä½¿ç”¨å»ºè­°](#ä½¿ç”¨å»ºè­°)
6. [æ‘˜è¦åŠŸèƒ½](#æ‘˜è¦åŠŸèƒ½)
7. [å…±åŒé–‹ç™¼æ­¤å°ˆæ¡ˆ](#å…±åŒé–‹ç™¼æ­¤å°ˆæ¡ˆ)
   - [é–‹ç™¼ç’°å¢ƒè¨­å®š](#1-å®‰è£é–‹ç™¼ç›¸ä¾å¥—ä»¶)
   - [ç¨‹å¼ç¢¼è¦ç¯„](#3-ç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡æª¢æŸ¥)
8. [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)
9. [è²¢ç»èˆ‡æˆæ¬Š](#è²¢ç»)

## ç‰¹é»

- ğŸ¤– åˆ©ç”¨ AI æ™ºèƒ½åˆ†æç¨‹å¼ç¢¼è®Šæ›´
- ğŸ“ ç”Ÿæˆçµæ§‹åŒ–çš„ commit è¨Šæ¯
- ğŸ”„ ç„¡ç¸«æ•´åˆåˆ° Git å·¥ä½œæµç¨‹
- ğŸŒ æ”¯æ´å¤šå€‹ Git å°ˆæ¡ˆå…±ç”¨é…ç½®

## å®‰è£

### 1. å®‰è£å¥—ä»¶

```bash
# å¾ GitHub å®‰è£
pip install git+https://github.com/OrarioGit/Commit-Assistant.git

# æˆ–cloneå¾Œæœ¬åœ°å®‰è£
git clone https://github.com/OrarioGit/Commit-Assistant.git
cd commit-assistant
pip install -e .
```

### 2. æ›´æ–°å¥—ä»¶

```bash
# ç›´æ¥æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬
pip install git+https://github.com/OrarioGit/Commit-Assistant.git -U

# æˆ–åœ¨æœ¬åœ°å°ˆæ¡ˆç›®éŒ„æ›´æ–°
pip install -e . -U
```

### 3. è¨­å®š Google Gemini API é‡‘é‘°

1. å‰å¾€ [å–å¾— Gemini API é‡‘é‘°](https://ai.google.dev/gemini-api/docs/api-key) è¨»å†Šä¸¦ç²å– API é‡‘é‘°
2. é‹è¡Œä»¥ä¸‹å‘½ä»¤è¨­å®šé‡‘é‘°ï¼š

```bash
commit-assistant config setup
```

### 4. è¨­å®š Git Hook

åœ¨ä½ çš„ Git å°ˆæ¡ˆä¸­é‹è¡Œï¼š

```bash
cd your-repository-path
commit-assistant install
```

## ä½¿ç”¨æ–¹æ³•

### æŒ‡ä»¤èªªæ˜

Commit Assistant æä¾›å…©ç¨®æ–¹å¼å‘¼å«æŒ‡ä»¤ï¼š

- `commit-assistant`: å®Œæ•´æŒ‡ä»¤
- `cmt-a`: ç°¡çŸ­åˆ¥åï¼ŒåŠŸèƒ½å®Œå…¨ç›¸åŒ

ä»¥ä¸‹èªªæ˜ä¸­çš„æŒ‡ä»¤çš†å¯ä½¿ç”¨ä¸Šè¿°å…©ç¨®æ–¹å¼åŸ·è¡Œï¼Œä¾‹å¦‚ï¼š

```bash
commit-assistant commit

# æˆ–
cmt-a commit
```

### è‡ªå‹•æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰

å®‰è£å®Œæˆå¾Œï¼Œç•¶ä½ åŸ·è¡Œ `git commit` æ™‚ï¼ŒCommit Assistant æœƒè‡ªå‹•é‹è¡Œä¸¦ç”Ÿæˆ commit è¨Šæ¯ã€‚

### æ‰‹å‹•æ¨¡å¼

ä½ ä¹Ÿå¯ä»¥æ‰‹å‹•é‹è¡Œå‘½ä»¤ï¼š

```bash
commit-assistant commit
```

### é…ç½®ç®¡ç†

æŸ¥çœ‹ç•¶å‰é…ç½®ï¼š

```bash
commit-assistant config show
```

æ¸…é™¤é…ç½®ï¼š

```bash
commit-assistant config clear
```

## æ›´æ–°ç®¡ç†

Commit Assistant æä¾›äº†æ–¹ä¾¿çš„æ›´æ–°æ©Ÿåˆ¶ï¼Œå¯ä»¥è¼•é¬†æ›´æ–°å–®ä¸€æˆ–å¤šå€‹å°ˆæ¡ˆçš„ç›¸é—œè¨­å®šã€‚

### æ›´æ–°å–®ä¸€å°ˆæ¡ˆ

åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹åŸ·è¡Œï¼š

```bash
commit-assistant update
```

æˆ–æŒ‡å®šç‰¹å®šå°ˆæ¡ˆè·¯å¾‘ï¼š

```bash
commit-assistant update --repo-path /path/to/your/repo
```

é€™å€‹æŒ‡ä»¤æœƒï¼š

- æ›´æ–°å°ˆæ¡ˆçš„ Git hook è¨­å®š
- æ›´æ–°ç›¸é—œé…ç½®æ–‡ä»¶
- è‡ªå‹•è¨˜éŒ„å®‰è£ä¿¡æ¯

### æ‰¹é‡æ›´æ–°æ‰€æœ‰å°ˆæ¡ˆ

æ›´æ–°æ‰€æœ‰æ›¾ç¶“å®‰è£éçš„å°ˆæ¡ˆï¼š

```bash
commit-assistant update --all-repo
```

é€™å€‹æŒ‡ä»¤æœƒï¼š

- è‡ªå‹•æƒææ‰€æœ‰å·²å®‰è£çš„å°ˆæ¡ˆ
- ä¾åºæ›´æ–°æ¯å€‹å°ˆæ¡ˆçš„è¨­å®š
- æä¾›æ›´æ–°é€²åº¦å’Œçµæœå ±å‘Š
- è‡ªå‹•è·³éä¸å­˜åœ¨çš„å°ˆæ¡ˆè·¯å¾‘

å¦‚æœæ›´æ–°éç¨‹ä¸­æŸå€‹å°ˆæ¡ˆç™¼ç”ŸéŒ¯èª¤ï¼Œç¨‹å¼æœƒï¼š

- é¡¯ç¤ºéŒ¯èª¤ä¿¡æ¯
- ç¹¼çºŒè™•ç†å…¶ä»–å°ˆæ¡ˆ

## Commit é¢¨æ ¼ç®¡ç†

Commit Assistant æ”¯æ´å¤šç¨®æäº¤è¨Šæ¯é¢¨æ ¼ï¼Œä¸¦å…è¨±ä½¿ç”¨è€…è‡ªè¨‚å°ˆå±¬çš„é¢¨æ ¼æ¨¡æ¿ã€‚

### é¢¨æ ¼çš„å±¤ç´š

Commit Assistant æä¾›ä¸‰ç¨®å±¤ç´šçš„é¢¨æ ¼ç®¡ç†ï¼š

1. **ç³»çµ±å…§å»º**
   - å¥—ä»¶æä¾›çš„é è¨­é¢¨æ ¼ï¼ˆconventional, emoji, angular, customï¼‰
   - ç„¡æ³•ä¿®æ”¹æˆ–åˆªé™¤
   - é©ç”¨æ–¼æ‰€æœ‰å°ˆæ¡ˆ

2. **å…¨åŸŸè‡ªè¨‚**ï¼ˆGlobalï¼‰
   - å¯ä»¥åœ¨ä¸åŒå°ˆæ¡ˆé–“å…±ç”¨
   - é©åˆåœ˜éšŠæˆ–å€‹äººå¸¸ç”¨çš„è‡ªè¨‚é¢¨æ ¼
   - åªæœ‰ç•¶å‰ä½¿ç”¨è€…å¯ä»¥ä½¿ç”¨

3. **å°ˆæ¡ˆè‡ªè¨‚**ï¼ˆProjectï¼‰
   - å­˜æ”¾åœ¨å°ˆæ¡ˆç›®éŒ„ `./your-repo/.commit-assistant/style/`
   - åƒ…å°ç•¶å‰å°ˆæ¡ˆæœ‰æ•ˆ
   - æœƒè¢«åŒ…å«åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­
   - é©åˆå°ˆæ¡ˆç‰¹å®šçš„æäº¤è¦ç¯„
   - åœ˜éšŠæ‰€æœ‰æˆå“¡éƒ½å¯ä»¥ä½¿ç”¨

å¦‚æœæœ‰é‡å
ç³»çµ±ä½¿ç”¨å„ªå…ˆé †åºï¼šå°ˆæ¡ˆè‡ªè¨‚ > å…¨åŸŸè‡ªè¨‚ > ç³»çµ±å…§å»º

### ç³»çµ±å…§å»ºçš„é¢¨æ ¼ç¯„ä¾‹

- Conventional
  ![Conventional](docs/images/conventional.png)
- Emoji
  ![Emoji](docs/images/emoji.png)
- Angular
  ![Angular](docs/images/angular.png)
- Custom (å€‹äººå®šç¾©çµ¦è‡ªå·±å…§éƒ¨å°ˆæ¡ˆä½¿ç”¨çš„)
  ![Custom](docs/images/custom.png)

### åˆ—å‡ºç•¶å‰å°ˆæ¡ˆå¯ä½¿ç”¨çš„é¢¨æ ¼

```bash
cd your-repository-path
commit-assistant style list
```

æ­¤æŒ‡ä»¤æœƒé¡¯ç¤ºæ‰€æœ‰å±¤ç´šçš„å¯ç”¨é¢¨æ ¼å’Œå…¶æè¿°ã€‚

### åœ¨å°ˆæ¡ˆå…§ä½¿ç”¨ç‰¹å®šé¢¨æ ¼

åŸ·è¡Œå®Œå¾Œï¼Œæœƒå¹«æ‚¨æŠŠè¨­å®šçš„é¢¨æ ¼å¯«å…¥æˆ‘å€‘çš„ config æª”æ¡ˆä¸­
æ³¨æ„ï¼šå¦‚æœæœ‰é‡åçš„æª”æ¡ˆ
ç³»çµ±æ¡ç”¨é †åºï¼šå°ˆæ¡ˆè‡ªè¨‚ > å…¨åŸŸè‡ªè¨‚ > ç³»çµ±å…§å»º

```bash
cd your-repository-path
commit-assistant style use <é¢¨æ ¼åç¨±>
```

### åŒ¯å‡ºé¢¨æ ¼ template

ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¸çŸ¥é“è©²åŒ¯å…¥æ€éº¼æ¨£çš„æ ¼å¼å—ï¼Œä½¿ç”¨ template ç…§è‘—æ”¹å°±è¡Œ~

```bash
# åŒ¯å‡ºæ¨¡æ¿åˆ°ç•¶å‰ç›®éŒ„
commit-assistant style template

# æˆ–è€…ï¼Œæ‚¨æœ‰è‡ªå·±å¿ƒå„€çš„è·¯å¾‘
commit-assistant style template -o .\some_secret_path
```

### template ç¯„ä¾‹

```yaml
description: "é¢¨æ ¼æè¿°"
prompt: |
  è«‹æ ¹æ“šä»¥ä¸‹çš„ä»£ç¢¼è®Šæ›´ç”Ÿæˆç¬¦åˆè¦ç¯„çš„ commit messageã€‚

  è®Šæ›´æ–‡ä»¶:
  {changed_files}
  è®Šæ›´å…§å®¹:
  {diff_content}

  [æ‚¨çš„æ ¼å¼è¦ç¯„...]

  è¦æ±‚ï¼š
  1. [æ‚¨çš„è¦æ±‚ 1]
  2. [æ‚¨çš„è¦æ±‚ 2]
```

### åŒ¯å…¥é¢¨æ ¼

```bash
# ç‚ºç•¶å‰å°ˆæ¡ˆåŒ¯å…¥é¢¨æ ¼ï¼ˆæœƒè¢«ç‰ˆæœ¬æ§åˆ¶ï¼‰
# åŒ¯å…¥å¾ŒæœƒåŠ å…¥ä¸€å€‹my-styleçš„é¢¨æ ¼
commit-assistant style add my-style.yaml

# ç•¶ç„¶æ‚¨ä¹Ÿå¯ä»¥å–ä¸€å€‹æ‚¨å–œæ­¡çš„åå­—
commit-assistant style add my-style.yaml -n cool-style

# åŒ¯å…¥ç‚ºå…¨åŸŸé¢¨æ ¼ï¼ˆå¯åœ¨ä¸åŒå°ˆæ¡ˆä¸­ä½¿ç”¨ï¼‰
commit-assistant style add --global my-style.yaml
```

### ç§»é™¤é¢¨æ ¼

ç´¯äº†ï¼Œæ¯€æ»…å§ï¼Œæˆ‘ä¸è¦é€™å€‹é¢¨æ ¼äº†

```bash
commit-assistant style remove <é¢¨æ ¼åç¨±>

# ç§»é™¤å…¨åŸŸé¢¨æ ¼
commit-assistant style remove <é¢¨æ ¼åç¨±> -g
```

### ä½¿ç”¨å»ºè­°

1. é¸æ“‡å…¨åŸŸæˆ–å°ˆæ¡ˆé¢¨æ ¼ï¼Ÿ
    - å¦‚æœæ˜¯åœ˜éšŠå…±ç”¨çš„é¢¨æ ¼ï¼Œå»ºè­°ä½¿ç”¨å°ˆæ¡ˆé¢¨æ ¼ï¼Œæ›´å¥½èˆ‡åœ˜éšŠå…±ç”¨
    - å¦‚æœæ˜¯å€‹äººåå¥½çš„é¢¨æ ¼ï¼Œå»ºè­°ä½¿ç”¨å…¨åŸŸé¢¨æ ¼ï¼Œä½¿ç”¨å…¨åŸŸå„ªå…ˆä½¿ç”¨è‡ªå·±çš„å€‹äººé¢¨æ ¼
    - å¦‚æœéœ€è¦åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­è¿½è¹¤é¢¨æ ¼çš„è®Šæ›´ï¼Œä½¿ç”¨å°ˆæ¡ˆé¢¨æ ¼ï¼Œç•¢ç«Ÿåœ˜éšŠçš„çµ±ä¸€ä¹Ÿå¾ˆé‡è¦
2. é¢¨æ ¼ç®¡ç†æœ€ä½³å¯¦è¸
    - åœ¨ `.gitignore` ä¸­æ’é™¤å…¨åŸŸé¢¨æ ¼ç›®éŒ„
    - ç‚ºé¢¨æ ¼æª”æ¡ˆæä¾›æ¸…æ¥šçš„æè¿°
    - åœ¨åœ˜éšŠä¸­çµ±ä¸€ä½¿ç”¨å°ˆæ¡ˆé¢¨æ ¼

## æ‘˜è¦åŠŸèƒ½

å¯å°‡æŒ‡å®šå€é–“çš„ commit è¨Šæ¯é€²è¡Œç°¡çŸ­æ‘˜è¦ï¼ŒAI ç”¢ç”Ÿå®Œæ‘˜è¦å¾Œé™¤äº†æœƒé¡¯ç¤ºæ–¼ terminal å¤–ï¼Œä¹Ÿæœƒå°‡æ‘˜è¦å…§å®¹è‡ªå‹•è¤‡è£½åˆ°å‰ªè²¼ç°¿ä¸­

```bash
commit-assistant summary --start-from "commit èµ·å§‹æ—¥æœŸ(YYYY-mm-dd HH:MM:SS æˆ– YYYY-mm-dd)" --end-to "commit çµæŸæ—¥æœŸ(YYYY-mm-dd HH:MM:SS æˆ– YYYY-mm-dd)"
```

## å…±åŒé–‹ç™¼æ­¤å°ˆæ¡ˆ

### Git å·¥ä½œæµç¨‹

ç‚ºä¿æŒæäº¤æ­·å²çš„æ•´æ½”ï¼Œè«‹ä½¿ç”¨ rebase æ–¹å¼é€²è¡Œæ›´æ–°ï¼š

```bash
# æ›´æ–°å°ˆæ¡ˆæ™‚ä½¿ç”¨ rebase
git pull --rebase origin main
```

åœ¨é–‹å§‹é–‹ç™¼ä¹‹å‰ï¼Œè«‹ä¾åºå®Œæˆä»¥ä¸‹è¨­å®šï¼š

### 1. å®‰è£é–‹ç™¼ç›¸ä¾å¥—ä»¶

```bash
# Clone å°ˆæ¡ˆ
git clone https://github.com/OrarioGit/Commit-Assistant.git
cd commit-assistant

# å¯ä¾éœ€æ±‚å»ºç«‹è™›æ“¬ç’°å¢ƒ
# uv venv

# å®‰è£é–‹ç™¼ç›¸ä¾å¥—ä»¶
pip install -e ".[dev]"
```

### 2. å®‰è£ pre-commit hooks

```bash
# é€™æœƒåœ¨æ‚¨ commit å‰åšäº›åŸºæœ¬æª¢æŸ¥
pre-commit install
```

### 3. ç¨‹å¼ç¢¼é¢¨æ ¼èˆ‡æª¢æŸ¥

æœ¬å°ˆæ¡ˆä½¿ç”¨ ruff ä½œç‚ºä¸»è¦çš„ç¨‹å¼ç¢¼ linterï¼š

```bash
# åŸ·è¡Œç¨‹å¼ç¢¼æª¢æŸ¥
ruff check .

# è‡ªå‹•ä¿®æ­£æ ¼å¼å•é¡Œ
ruff format .
```

å»ºè­°åœ¨ä½ çš„é–‹ç™¼ç’°å¢ƒä¸­è¨­å®šç·¨è¼¯å™¨æ”¯æ´ ruffï¼Œé€™æ¨£å¯ä»¥å³æ™‚çœ‹åˆ°ç¨‹å¼ç¢¼å•é¡Œï¼š

- VS Codeï¼šå®‰è£ "Ruff" æ“´å……å¥—ä»¶
- PyCharmï¼šå•Ÿç”¨ Ruff æ•´åˆ
- å…¶ä»–ç·¨è¼¯å™¨ï¼š[åƒè€ƒ Ruff å®˜æ–¹æ–‡ä»¶](https://github.com/astral-sh/ruff)

### 4. é—œæ–¼ç”¢ç”Ÿ pyproject.toml

åœ¨æœ¬å°ˆæ¡ˆä¸­å¦‚æœæœ‰ç›¸é—œçš„æ›´å‹•æ¯”å¦‚**ç‰ˆæœ¬æ›´æ–°**ã€**ä¾è³´æ›´æ–°**ç­‰
å¯å…ˆæ›´æ”¹`core/project_config.py`è£¡é¢çš„è¨­å®š
ä¸¦åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤

```bash
python -m commit_assistant.scripts.build_pyproject
```

è©²æŒ‡ä»¤å¯æ ¹æ“šè®Šæ›´ç”¢ç”Ÿå‡ºçµ±ä¸€è¦ç¯„çš„ pyproject.toml æª”
**æ³¨æ„ï¼** åŸ·è¡Œå‰éœ€å…ˆä½¿ç”¨`pip install -e ".[dev]"`é€²è¡Œå®‰è£

## å¸¸è¦‹å•é¡Œ

**Q: å¦‚ä½•æ›´æ–° API é‡‘é‘°ï¼Ÿ**
A: å†æ¬¡é‹è¡Œ `commit-assistant config setup` å³å¯æ›´æ–°

**Q: å¦‚ä½•åœ¨ç‰¹å®šå°ˆæ¡ˆåœç”¨è‡ªå‹•ç”Ÿæˆï¼Ÿ**
A: ç·¨è¼¯ `.commit-assistant-config` æª”æ¡ˆï¼Œè¨­å®š `ENABLE_COMMIT_ASSISTANT=false`

## è²¢ç»

æ­¡è¿æå‡ºä»»ä½•æ”¹é€²å»ºè­°å’Œ Pull Requestsï¼

## æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ Apache License 2.0 æˆæ¬Šï¼Œè©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚
